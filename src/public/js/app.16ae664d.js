(function(t){function e(e){for(var s,i,r=e[0],c=e[1],u=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("85ec"),o=n.n(s);o.a},"0bec":function(t,e,n){},"273b":function(t,e,n){"use strict";var s=n("27db"),o=n.n(s);o.a},"27db":function(t,e,n){},"2ca3":function(t,e,n){},4913:function(t,e,n){},"4c35":function(t,e,n){"use strict";var s=n("724f"),o=n.n(s);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=n("8c4f"),a=n("bc3a"),i=n.n(a),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Nav"),n("div",{staticClass:"main-content"},[n("router-view")],1),n("Footer")],1)},c=[],u=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"navbar"},[t._l(t.links,(function(e){return n("router-link",{key:e.id,staticClass:"links",class:{"links-selected":e.page===t.activeRoute},attrs:{to:e.page},nativeOn:{click:function(e){return t.changeActiveRoute()}}},[e.requiresAuth||t.isLoggedIn?t._e():n("div",[t._v(t._s(e.text))])])})),t.isLoggedIn?n("a",{staticClass:"logout-btn",on:{click:t.logout}},[t._v("logout")]):t._e()],2)])}),l=[],d={data:function(){return{links:[{id:0,text:"signup",page:"/",requiresAuth:!1},{id:1,text:"login",page:"/login",requiresAuth:!1},{id:2,text:"tasks",page:"/tasklist",requiresAuth:!0}],activeRoute:this.$router.currentRoute.path}},methods:{changeActiveRoute:function(){return this.activeRoute=this.$router.currentRoute.path},logout:function(){var t=this;this.$store.dispatch("login/logout").then((function(){t.$router.push("/login")})).catch((function(t){return console.log(t)}))}},computed:{isLoggedIn:function(){return this.$store.getters["login/isLoggedIn"]}},watch:{$route:function(){this.changeActiveRoute()}}},p=d,f=(n("5b49"),n("2877")),m=Object(f["a"])(p,u,l,!1,null,null,null),h=m.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("p",[t._v("an sbsto production.")]),n("p",[t._v("sbsto © "+t._s(t.year))])])},g=[],v={name:"Footer",data:function(){return{year:(new Date).getFullYear()}}},b=v,w=(n("8d28"),Object(f["a"])(b,k,g,!1,null,"6b042b10",null)),_=w.exports,T={name:"App",components:{Nav:h,Footer:_},created:function(){this.$http.interceptors.response.use(void 0,(function(t){return new Promise((function(){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch("login/logout"),t}))}))}},$=T,y=(n("034f"),Object(f["a"])($,r,c,!1,null,null,null)),C=y.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{attrs:{id:"title"}},[t._v("Tasks")]),n("TaskFilter",{on:{setActiveFilter:function(e){return t.setActiveFilter(e)}}}),n("TaskControlCenter"),t._l(t.filteredTasks,(function(t){return n("Task",{key:t.id,attrs:{"task-details":t}})})),n("TaskAdd")],2)},x=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task",class:{"task-completed":t.taskDetails.completed,"task-incomplete":!t.taskDetails.completed}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.taskDetails.completed,expression:"taskDetails.completed"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.taskDetails.completed)?t._i(t.taskDetails.completed,null)>-1:t.taskDetails.completed},on:{click:function(e){return t.toggleCompleted(t.taskDetails.id)},change:function(e){var n=t.taskDetails.completed,s=e.target,o=!!s.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);s.checked?i<0&&t.$set(t.taskDetails,"completed",n.concat([a])):i>-1&&t.$set(t.taskDetails,"completed",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.taskDetails,"completed",o)}}}),n("div",{staticClass:"task-info",class:{"task-info-completed":t.taskDetails.completed}},[t.taskDetails.editing?n("input",{directives:[{name:"model",rawName:"v-model",value:t.taskDetails.description,expression:"taskDetails.description"},{name:"focus",rawName:"v-focus"}],staticClass:"task-edit",attrs:{type:"text"},domProps:{value:t.taskDetails.description},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doneEdit(t.taskDetails.id)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEdit(t.taskDetails.id)}],blur:function(e){return t.doneEdit(t.taskDetails.id)},input:function(e){e.target.composing||t.$set(t.taskDetails,"description",e.target.value)}}}):n("div",{staticClass:"task-label",on:{dblclick:function(e){return t.editTask(t.taskDetails.id)}}},[t._v(t._s(t.taskDetails.description))])]),n("div",{staticClass:"remove-button",on:{click:function(e){return t.removeTask(t.taskDetails.id)}}},[t._v("×")])])},S=[],D={name:"Task",props:["taskDetails"],methods:{editTask:function(t){this.$store.dispatch("tasks/editTask",t)},doneEdit:function(t){this.$store.dispatch("tasks/doneEdit",t).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},cancelEdit:function(t){this.$store.dispatch("tasks/cancelEdit",t)},removeTask:function(t){this.$store.dispatch("tasks/removeTask",t).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},toggleCompleted:function(t){this.$store.dispatch("tasks/toggleCompleted",t).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))}},directives:{focus:{inserted:function(t){t.focus()}}}},O=D,F=(n("273b"),Object(f["a"])(O,A,S,!1,null,null,null)),L=F.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filter"},[n("div",{staticClass:"option",class:{"option-selected":null===this.$store.state.tasks.activeFilter},on:{click:function(e){return t.setActiveFilter({filter:null})}}},[t._v("all")]),n("div",{staticClass:"option",class:{"option-selected":!1===this.$store.state.tasks.activeFilter},on:{click:function(e){return t.setActiveFilter({filter:!1})}}},[t._v("incomplete")]),n("div",{staticClass:"option",class:{"option-selected":!0===this.$store.state.tasks.activeFilter},on:{click:function(e){return t.setActiveFilter({filter:!0})}}},[t._v("complete")])])},j=[],R={name:"TaskFilter",methods:{setActiveFilter:function(t){this.$store.dispatch("tasks/setActiveFilter",t)}}},N=R,I=(n("a101"),Object(f["a"])(N,P,j,!1,null,null,null)),q=I.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control-center"},["allDone"===t.controlButtonShown?n("div",{staticClass:"btn",on:{click:t.completeAll}},[t._v("all done")]):t._e(),"clear"===t.controlButtonShown?n("div",{staticClass:"btn",on:{click:t.removeCompleted}},[t._v("clear")]):t._e(),n("div",[t._v(t._s(t.taskNumberString))])])},z=[],M={name:"TaskControlCenter",methods:{completeAll:function(){this.$store.dispatch("tasks/completeAll")},removeCompleted:function(){this.$store.dispatch("tasks/removeCompleted")}},computed:{taskNumberString:function(){return this.$store.getters["tasks/taskNumberString"]},controlButtonShown:function(){return this.$store.getters["tasks/controlButtonShown"]}}},J=M,W=(n("7d27"),Object(f["a"])(J,B,z,!1,null,null,null)),G=W.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null===this.$store.state.tasks.activeFilter||!1===this.$store.state.tasks.activeFilter?n("div",{staticClass:"add"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addTask(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTask,expression:"newTask"}],staticClass:"text-input",attrs:{type:"text",placeholder:"add a new task"},domProps:{value:t.newTask},on:{input:function(e){e.target.composing||(t.newTask=e.target.value)}}})])]):t._e()},U=[],Y={name:"TaskAdd",data:function(){return{newTask:""}},methods:{addTask:function(){this.$store.dispatch("tasks/addTask",{id:0,description:this.newTask,completed:!1,editing:!1}).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)})),this.newTask=""}}},K=Y,Q=(n("c800"),Object(f["a"])(K,H,U,!1,null,null,null)),V=Q.exports,X={name:"Tasks",components:{Task:L,TaskFilter:q,TaskControlCenter:G,TaskAdd:V},data:function(){return{newTask:"",idForTask:3}},computed:{incompletedTasksLength:function(){return this.$store.getters["tasks/incompletedTasksLength"]},completedTasksLength:function(){return this.$store.getters["tasks/completedTasksLength"]},filteredTasks:function(){return this.$store.getters["tasks/filteredTasks"]},taskString:function(){return this.$store.getters["tasks/taskString"]}},created:function(){this.$store.dispatch("tasks/fetchTasks").then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))}},Z=X,tt=(n("4c35"),Object(f["a"])(Z,E,x,!1,null,"81ddb644",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{attrs:{id:"title"}},[t._v("Sign up")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("input",{staticClass:"text-input",attrs:{placeholder:"name"},domProps:{value:t.name},on:{input:t.updateName}}),n("br"),n("input",{staticClass:"text-input",attrs:{placeholder:"email"},domProps:{value:t.email},on:{input:t.updateEmail}}),n("br"),n("input",{staticClass:"text-input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:t.updatePassword}}),n("br"),n("input",{staticClass:"btn",class:t.buttonStyleSignup,attrs:{type:"submit",value:"submit",disabled:"btn-inactive"===t.buttonStyleSignup}})])])},st=[],ot=(n("b0c0"),{name:"Signup",methods:{signup:function(){var t=this;this.$store.dispatch("login/signup").then((function(){return t.$router.push("/tasklist")})).catch((function(t){return console.log(t)}))},updateName:function(t){this.$store.commit("login/updateName",t.target.value)},updateEmail:function(t){this.$store.commit("login/updateEmail",t.target.value)},updatePassword:function(t){this.$store.commit("login/updatePassword",t.target.value)}},computed:{buttonStyleSignup:function(){return this.$store.getters["login/buttonStyleSignup"]},name:function(){return this.$store.state.login.name},email:function(){return this.$store.state.login.email},password:function(){return this.$store.state.login.password}}}),at=ot,it=(n("cfba"),Object(f["a"])(at,nt,st,!1,null,"723aa205",null)),rt=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{attrs:{id:"title"}},[t._v("Log in")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("input",{staticClass:"text-input",attrs:{placeholder:"email"},domProps:{value:t.email},on:{input:t.updateEmail}}),n("br"),n("input",{staticClass:"text-input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:t.updatePassword}}),n("br"),n("input",{staticClass:"btn",class:t.buttonStyleLogin,attrs:{type:"submit",value:"login",disabled:"btn-inactive"===t.buttonStyleLogin}})])])},ut=[],lt={name:"Login",methods:{login:function(){var t=this;this.$store.dispatch("login/login").then((function(){return t.$router.push("/tasklist")})).catch((function(t){return console.log(t)}))},updateEmail:function(t){this.$store.commit("login/updateEmail",t.target.value)},updatePassword:function(t){this.$store.commit("login/updatePassword",t.target.value)}},computed:{buttonStyleLogin:function(){return this.$store.getters["login/buttonStyleLogin"]},email:function(){return this.$store.state.login.email},password:function(){return this.$store.state.login.password}}},dt=lt,pt=(n("ad48"),Object(f["a"])(dt,ct,ut,!1,null,"dffc4fe0",null)),ft=pt.exports,mt=n("2f62"),ht=(n("a4d3"),n("e01a"),n("4de4"),n("7db0"),n("4160"),n("159b"),n("96cf"),n("1da1")),kt={namespaced:!0,state:function(){return{tasks:[],activeFilter:null,loading:!1}},getters:{incompletedTasksLength:function(t){return t.tasks.filter((function(t){return!t.completed})).length},completedTasksLength:function(t){return t.tasks.filter((function(t){return t.completed})).length},filteredTasks:function(t){return null===t.activeFilter?t.tasks:t.tasks.filter((function(e){return e.completed===t.activeFilter}))},taskNumberString:function(t,e){var n=e.incompletedTasksLength,s=e.completedTasksLength,o=t.activeFilter;return null===o||!1===o?0===n?"no tasks left":1===n?"1 task left":n>1?n+" tasks left":null:0===s?"no finished tasks":1===s?"1 finished task":s>1?s+" finished tasks":null},controlButtonShown:function(t,e){var n=t.activeFilter;return(null===n||!1===n)&&e.incompletedTasksLength>0?"allDone":!0===n&&e.completedTasksLength>0?"clear":null}},mutations:{addTask:function(t,e){var n=e.data;return n.id=n._id,delete n.owner,delete n.createdAt,delete n.updatedAt,delete n.__v,delete n._id,t.tasks.push(n)},completeAll:function(t){return t.tasks.forEach((function(t){t.completed=!0}))},removeCompleted:function(t){return t.tasks=t.tasks.filter((function(t){return!0!==t.completed}))},setActiveFilter:function(t,e){return t.activeFilter=e.filter},editTask:function(t,e){var n=this;t.tasks.forEach((function(t){t.id===e&&(n.beforeEditCache=t.description,t.editing=!0)}))},doneEdit:function(t,e){var n=this;t.tasks.forEach((function(t){t.id===e&&(t.description?t.editing=!1:n.removeTask(e))}))},cancelEdit:function(t,e){var n=this;t.tasks.forEach((function(t){t.id===e&&(t.description=n.beforeEditCache,t.editing=!1)}))},removeTask:function(t,e){t.tasks=t.tasks.filter((function(t){return t.id!==e}))},toggleCompleted:function(t,e){t.tasks.forEach((function(t){t.id===e&&(console.log("working..."),t.completed=!t.completed)}))},tasks_requested:function(t){t.loading=!0},getTasks:function(t,e){var n=e.data;n.forEach((function(t){t.id=t._id,delete t._id,delete t.owner,delete t.createdAt,delete t.updatedAt,delete t.__v,t.editing=!1})),t.loading=!1,t.tasks=n}},actions:{addTask:function(t,e){return Object(ht["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,n.t0=s,n.next=4,i.a.post("/api/tasks/create",{description:e.description});case 4:n.t1=n.sent,(0,n.t0)("addTask",n.t1);case 6:case"end":return n.stop()}}),n)})))()},completeAll:function(t){var e=t.commit,n=t.dispatch,s=t.state;s.tasks.forEach((function(t){t.completed||n("toggleCompleted",t.id).then().catch((function(t){return console.log(t)}))})),e("completeAll")},removeCompleted:function(t){var e=t.commit,n=t.dispatch,s=t.state;s.tasks.forEach((function(t){t.completed&&n("removeTask",t.id).then().catch((function(t){return console.log(t)}))})),e("removeCompleted")},setActiveFilter:function(t,e){var n=t.commit;n("setActiveFilter",e)},editTask:function(t,e){var n=t.commit;n("editTask",e)},doneEdit:function(t,e){return Object(ht["a"])(regeneratorRuntime.mark((function n(){var s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,o=t.state,s("doneEdit",e),a=o.tasks.find((function(t){return t.id===e})),n.next=5,i.a.patch("/api/tasks/"+e,{description:a.description});case 5:case"end":return n.stop()}}),n)})))()},cancelEdit:function(t,e){var n=t.commit;n("cancelEdit",e)},removeTask:function(t,e){return Object(ht["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,n.next=3,i.a.delete("/api/tasks/"+e);case 3:s("removeTask",e);case 4:case"end":return n.stop()}}),n)})))()},toggleCompleted:function(t,e){return Object(ht["a"])(regeneratorRuntime.mark((function n(){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.state,o=s.tasks.find((function(t){return t.id===e})),n.next=4,i.a.patch("/api/tasks/"+e,{completed:!o.completed});case 4:case"end":return n.stop()}}),n)})))()},fetchTasks:function(t){return Object(ht["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,n("tasks_requested"),e.t0=n,e.next=5,i.a.get("/api/tasks/list");case 5:e.t1=e.sent,(0,e.t0)("getTasks",e.t1);case 7:case"end":return e.stop()}}),e)})))()}}},gt={namespaced:!0,state:function(){return{name:null,email:null,password:null,token:localStorage.getItem("token")||"",user:{},status:null,response:null}},getters:{buttonStyleSignup:function(t){return t.name&&t.email&&t.password?"btn-active":"btn-inactive"},buttonStyleLogin:function(t){return t.email&&t.password?"btn-active":"btn-inactive"},isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},mutations:{updateName:function(t,e){return t.name=e},updateEmail:function(t,e){return t.email=e},updatePassword:function(t,e){return t.password=e},auth_request:function(t){t.status="loading"},auth_success:function(t,e,n){t.status="success",t.token=e,t.user=n},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},actions:{login:function(t){var e=t.commit,n=t.state;return new Promise((function(t,s){e("auth_request"),i.a.post("/api/users/login",{email:n.email,password:n.password}).then((function(n){var s=n.data.token,o=n.data.user;localStorage.setItem("token",s),i.a.defaults.headers.common["Authorization"]="Bearer ".concat(s),e("auth_success",s,o),t(n)})).catch((function(t){e("auth_error"),localStorage.removeItem("token"),s(t)}))}))},signup:function(t){var e=t.commit,n=t.state;return new Promise((function(t,s){e("auth_request"),i.a.post("/api/users/create",{name:n.name,email:n.email,password:n.password}).then((function(n){var s=n.data.token,o=n.data.user;localStorage.setItem("token",s),i.a.defaults.headers.common["Authorization"]="Bearer ".concat(s),e("auth_success",s,o),t(n)})).catch((function(t){e("auth_error",t),localStorage.removeItem("token"),s(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),i.a.post("/api/users/logout").then().catch((function(t){return console.log(t)})),localStorage.removeItem("token"),delete i.a.defaults.headers.common["Authorization"],t()}))}}};s["a"].use(mt["a"]);var vt=new mt["a"].Store({modules:{tasks:kt,login:gt}});s["a"].config.productionTip=!1,s["a"].prototype.$http=i.a,s["a"].use(o["a"]);var bt=localStorage.getItem("token");bt&&(s["a"].prototype.$http.defaults.headers.common["Authorization"]="Bearer ".concat(bt));var wt=[{path:"/tasklist",component:et,beforeEnter:function(t,e,n){console.log("AUTHENTICATING"),!1===vt.getters["login/isLoggedIn"]?(console.log("NOT ALLOWED IN"),n(!1)):(console.log("ALLOWED IN"),n())}},{path:"/",component:rt},{path:"/login",component:ft}],_t=new o["a"]({routes:wt});new s["a"]({el:"#app",render:function(t){return t(C)},router:_t,store:vt}).$mount("#app")},"58de":function(t,e,n){},"5b49":function(t,e,n){"use strict";var s=n("58de"),o=n.n(s);o.a},"724f":function(t,e,n){},"7d27":function(t,e,n){"use strict";var s=n("d9ee"),o=n.n(s);o.a},"85ec":function(t,e,n){},"8d28":function(t,e,n){"use strict";var s=n("4913"),o=n.n(s);o.a},"8e87":function(t,e,n){},a101:function(t,e,n){"use strict";var s=n("8e87"),o=n.n(s);o.a},ad48:function(t,e,n){"use strict";var s=n("2ca3"),o=n.n(s);o.a},c800:function(t,e,n){"use strict";var s=n("d567"),o=n.n(s);o.a},cfba:function(t,e,n){"use strict";var s=n("0bec"),o=n.n(s);o.a},d567:function(t,e,n){},d9ee:function(t,e,n){}});
//# sourceMappingURL=app.16ae664d.js.map